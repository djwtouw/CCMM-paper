# CCMM-paper
Code to replicate results in the paper _Convex Clustering through MM: An Efficient Algorithm to Perform Hierarchical Clustering_ by D.J.W. Touw, P.J.F. Groenen, and Y. Terada.

## Requirements
The CCMM packages CCMMR and CCMMPy, available at https://github.com/djwtouw/CCMMR and https://github.com/djwtouw/CCMMPy, and their dependencies. The R-package for AMA, available at https://cran.r-project.org/src/contrib/Archive/cvxclustr/.

## Files
Code to replicate results, contains the following:
The two main folders are ```Methodology``` and ```Numerical Results```, the former contains code for the examples and figures up to (but excluding) Section 4 in the aforementioned paper, the latter the code for the computations in Section 4. A brief description of the folders and files is included below.

- **```Methodology```**
  - **Illustrations_MakeRes.R**: script to generate the output to be used for the illustrations in the first three sections.
  - **Plot_Connectedness.py**: script to visualize the effects of different approaches to augmenting the weight matrix used in convex clustering.
  - **Plot_Dendrogram.py**: script to create a clusterpath and dendrogram for a simple data set of seven 2D data points.
  - **Plot_Dense_vs_Sparse.py**: script to plot the clusterpaths for three different types of weights used for convex clustering, two of which use a dense weight matrix and one uses a sparse weight matrix.
  - Additonal folders:
    - ```Data```: folder that contains the data used for generating the results used in the visualizations.
    - ```Figures```: folder that contains the figures.
    - ```Output```: folder that contains the output generated by Illustrations_MakeRes.R and is used in the Python scripts for the visualizations.
- **```Numerical Results```**
  - **analysis_{banknotes,gamma,mnist,musk}.R**: scripts to analyze four different real world data sets using CCMM and AMA in order to compare computational efficiency. Make sure to run **analysis_uci_SSNAL.m** first.
  - **analysis_power_consumption.py**: script to perform convex clustering on a data set containg over 1 million data points using CCMM. The data set analyzed is the individual household electril power consumption data set.
  - **analysis_uci_SSNAL.m**: script to compute clusterpaths for four different real world data sets using SSNAL in order to compare computational efficiency.
  - **convergence_analysis.R**: script to produce results used for the converge analysis of CCMM.
  - **n200_test_CCMM_AMA.R**: script to compute the clusterpath for a data set of 200 2D data points using CCMM and AMA. Used to compare the clusterpaths of the different algorithms. Make sure to run **n200_test_SSNAL.m** first.
  - **n200_test_SSNAL.m**: script to compute a clusterpath for a data set of 200 2D data points using SSNAL. Used to compare the clusterpaths of the different algorithms.
  - **n1000_to_5000_CCMM_AMA.R**: script to time how long CCMM and AMA take to compute clusterpaths for several generated data sets. Also stores values of the loss function to compare the accuracy of the algorithms. Make sure to run **n1000_to_5000_SSNAL.m** first.
  - **n1000_to_5000_SSNAL.m**: script to time how long SSNAL takes to compute clusterpaths for several generated data sets. Also stores values of the loss function to compare the accuracy of the algorithms.
  - **no_clustering_timings.m**: script to compute sections of clusterpath for which no cluster fusions occur. Results are used in the comparison in **no_clustering_timings.R**.
  - **no_clustering_timings.R**: script to compare performance of AMA, SSNAL, and CCMM in a situation without cluster fusions. For the results of SSNAL, make sure to run **no_clustering_timings.m** first.
  - **plot_convergence_analysis.py**: script to visualize the results of analyzing the convergence of CCMM.
  - **plot_no_clustering_timings.py**: plot to visualize the computation times of AMA versus CCMM and SSNAL versus CCMM in the analysis without cluster fusions.
  - **plot_power_consumption.py**: script to visualize the results of analyzing the individual household electric power consumption data set.
  - **plot_scaling_and_accuracy.py**: script to visualize the differences in scaling and accuracy for AMA, CCMM, and SSNAL.
  - **scaling_in_n_ccmm.R**: script to assess the scalability of CCMM using generated data sets.
  - Additional folders:
    - ```Data```: folder that contains the data used for generating the results used in the comparisons.
    - ```Figures```: folder that contains the figures.
    - ```Matlab```: folder that contains the source code for SSNAL, dowloaded from https://blog.nus.edu.sg/mattohkc/softwares/convexclustering/. Also contains a folder called utils_added, which contains Matlab functions used to easily perform convex clustering using SSNAL, transform SSNAL output into the same format as CCMM output, load results, and save results.
    - ```Output```: folder that contains the output generated and is used in the Python scripts for the visualizations.
- ```src```: contains several folders with helper functions (C++, R, Python).
